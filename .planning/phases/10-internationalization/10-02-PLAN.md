---
phase: 10-internationalization
plan: 02
type: execute
wave: 2
depends_on:
  - 10-01
files_modified:
  - frontend/src/messages/en-US.json
  - frontend/src/components/NavBar.tsx
  - frontend/src/components/admin/TagModal.tsx
  - frontend/src/components/import/SingleFileImport.tsx
  - frontend/src/components/transactions/TransactionRow.tsx
  - frontend/src/app/(main)/page.tsx
  - frontend/src/app/(main)/transactions/page.tsx
  - frontend/src/app/(main)/budgets/page.tsx
  - frontend/src/app/(main)/import/page.tsx
  - frontend/src/app/(main)/admin/page.tsx
  - frontend/src/app/(main)/tools/page.tsx
  - frontend/src/app/(main)/organize/page.tsx
autonomous: true
requirements:
  - I18N-01
  - I18N-02

must_haves:
  truths:
    - "All NavBar items use translation keys instead of hardcoded strings"
    - "All page titles use translation keys"
    - "All modal buttons use translation keys"
    - "All form labels and help text use translation keys"
    - "All error messages use translation keys"
  artifacts:
    - path: "frontend/src/messages/en-US.json"
      provides: "New translation keys for previously hardcoded strings"
      contains: "New keys added for NavBar, modals, forms"
    - path: "frontend/src/components/NavBar.tsx"
      provides: "NavBar using useTranslations for all items"
      pattern: "useTranslations.*nav"
    - path: "frontend/src/components/admin/TagModal.tsx"
      provides: "Modal buttons using translation keys"
      pattern: "t\\(['\"]"
  key_links:
    - from: "Components using hardcoded strings"
      to: "frontend/src/messages/en-US.json"
      via: "Add missing translation keys"
      pattern: "new keys for.*"
    - from: "Component .tsx files"
      to: "useTranslations() hook"
      via: "Replace hardcoded strings with t() calls"
      pattern: "t\\(['\"].*['\"]\\)"
---

<objective>
Convert all remaining hardcoded English strings to translation keys across NavBar, page titles, modal buttons, form labels, help text, and error messages.

Purpose: Complete I18N-01 and I18N-02 requirements by ensuring every user-facing string uses the translation system. This makes the app fully translatable and testable via pseudo-locale.

Output: Updated components using useTranslations() + new en-US.json keys for all previously hardcoded strings.
</objective>

<execution_context>
@/Users/joe/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joe/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-internationalization/10-01-SUMMARY.md
@frontend/src/messages/en-US.json
@frontend/src/components/NavBar.tsx
@docs/i18n-workflow.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run audit and create migration plan</name>
  <files>frontend/src/messages/en-US.json</files>
  <action>
**Step 1: Run the audit script from Plan 10-01:**
```bash
cd frontend && npx tsx src/lib/i18n-audit.ts > /tmp/i18n-audit-report.txt
```

**Step 2: Analyze the report:**
- Identify all hardcoded strings by category: NavBar items, page titles, modal buttons, form labels, help text, error messages
- Group strings by their logical namespace (e.g., nav.*, admin.tagModal.*, transactions.*, etc.)

**Step 3: Add missing translation keys to en-US.json:**
- For each hardcoded string found, create an appropriate translation key
- Follow existing key naming conventions (dot notation, camelCase)
- Add keys in the correct sections (nav, common, admin, transactions, import, etc.)
- Preserve existing JSON structure and formatting

**Key naming guidelines (from CLAUDE.md and i18n-workflow.md):**
- section.subsection.key format
- Good examples: nav.dashboard, admin.tagModal.createButton, transactions.filters.apply
- Reuse common.* for shared strings (save, cancel, delete, etc.)

**For I18N-01 (NavBar, page titles, modal buttons):**
- Ensure nav.* keys exist for all navigation items
- Ensure page-specific title keys exist (e.g., transactions.title, budgets.title)
- Ensure modal button keys exist in relevant sections (admin.tagModal.save, budgets.createBudget, etc.)

**For I18N-02 (form labels, help text, error messages):**
- Ensure form field label keys exist (fields.amount, fields.date, transactions.searchPlaceholder, etc.)
- Ensure help text keys exist (help.*, or inline descriptions)
- Ensure error message keys exist (errors.* for API errors, validation errors)

Output: Updated en-US.json with all necessary translation keys added.
  </action>
  <verify>
Check that en-US.json has grown with new keys:
```bash
wc -l frontend/src/messages/en-US.json  # Should be >946 lines
```

Spot-check 3-5 new keys to confirm they follow naming conventions and are placed in appropriate sections.
  </verify>
  <done>
en-US.json contains all translation keys needed to replace identified hardcoded strings. Keys follow dot notation naming conventions and are organized by section.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate components to use translation keys</name>
  <files>
frontend/src/components/NavBar.tsx
frontend/src/components/admin/TagModal.tsx
frontend/src/components/import/SingleFileImport.tsx
frontend/src/components/transactions/TransactionRow.tsx
frontend/src/app/(main)/page.tsx
frontend/src/app/(main)/transactions/page.tsx
frontend/src/app/(main)/budgets/page.tsx
frontend/src/app/(main)/import/page.tsx
frontend/src/app/(main)/admin/page.tsx
frontend/src/app/(main)/tools/page.tsx
frontend/src/app/(main)/organize/page.tsx
  </files>
  <action>
For each component identified in the audit report, convert hardcoded strings to translation keys:

**Migration pattern:**

1. **Import useTranslations at top of component:**
```tsx
import { useTranslations } from 'next-intl';
```

2. **Initialize hook in component body:**
```tsx
const t = useTranslations('sectionName');  // e.g., 'nav', 'transactions', 'admin'
```

3. **Replace hardcoded strings with t() calls:**

Before:
```tsx
<button>Save</button>
<input placeholder="Enter name" />
```

After:
```tsx
<button>{t('save')}</button>
<input placeholder={t('namePlaceholder')} />
```

**Specific targets (from requirements):**

**I18N-01 Coverage:**
- NavBar.tsx: All nav item labels (Dashboard, Transactions, Budgets, etc.)
- Page components: All page title elements (h1, title metadata)
- Modal components: All button labels (Save, Cancel, Delete, Create, etc.)

**I18N-02 Coverage:**
- Form components: All label elements, placeholder text, help text
- Error states: All error message strings (replace hardcoded error text with t('errors.CODE'))
- Validation messages: All client-side validation messages

**Important:**
- Do NOT change test IDs (data-testid values should remain as-is)
- Do NOT change data-chaos-target or data-chaos-exclude attributes
- Preserve all existing functionality and styling
- Keep component structure intact (only replace string literals)

**Handle interpolation where needed:**
If a string contains dynamic values (e.g., "Showing 5 of 100"), ensure en-US.json key uses placeholders:
```json
"showingCount": "Showing {shown} of {total}"
```

And component uses:
```tsx
t('showingCount', { shown: 5, total: 100 })
```

Work through components systematically:
1. NavBar and main page titles first (high visibility)
2. Modal components (TagModal, ImportResult, etc.)
3. Form components (filters, bulk actions, import forms)
4. Error messages (both API errors and validation messages)
  </action>
  <verify>
**Verification steps:**

1. **TypeScript compilation:**
```bash
cd frontend && npm run build
```
Should complete without errors.

2. **Run audit again to confirm reduction:**
```bash
cd frontend && npx tsx src/lib/i18n-audit.ts | wc -l
```
Count of reported hardcoded strings should be significantly reduced (ideally near zero for core UI components).

3. **Visual spot check:**
Start dev server and manually check 3-4 pages:
```bash
cd frontend && npm run dev
```
- Visit Dashboard, Transactions, Budgets, Import pages
- Verify text still displays correctly (English)
- Open a modal, verify buttons display correct text
- Switch language in settings to pseudo-locale, verify pseudo text appears

4. **Run existing E2E tests:**
```bash
cd frontend && npx playwright test e2e/navigation.spec.ts
```
Existing tests should still pass (test IDs unchanged, only strings migrated).
  </verify>
  <done>
All identified components now use useTranslations() for user-facing strings. NavBar items, page titles, modal buttons, form labels, help text, and error messages use translation keys instead of hardcoded English. TypeScript build passes, existing E2E tests pass, app displays correctly in English.
  </done>
</task>

</tasks>

<verification>
- [ ] en-US.json has new translation keys for all identified hardcoded strings
- [ ] NavBar uses translation keys for all navigation items (I18N-01)
- [ ] Page titles use translation keys (I18N-01)
- [ ] Modal buttons use translation keys (I18N-01)
- [ ] Form labels and help text use translation keys (I18N-02)
- [ ] Error messages use translation keys (I18N-02)
- [ ] TypeScript build passes with zero errors
- [ ] Existing E2E tests still pass
- [ ] App displays correctly in English and pseudo-locale
</verification>

<success_criteria>
- All NavBar items, page titles, and modal buttons use translation keys (I18N-01 satisfied)
- All form labels, help text, and error messages use translation keys (I18N-02 satisfied)
- Audit script reports minimal or zero hardcoded strings in core components
- Application maintains full functionality with translated strings
- Ready for pseudo-locale testing in Plan 10-03
</success_criteria>

<output>
After completion, create `.planning/phases/10-internationalization/10-02-SUMMARY.md`
</output>
