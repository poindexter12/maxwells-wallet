---
phase: 16-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Makefile
  - make/db.mk
  - make/dev.mk
  - make/docker.mk
  - make/i18n.mk
  - make/release.mk
  - make/test.mk
  - make/utils.mk
  - .nvmrc
  - backend/.python-version
  - setup.sh
autonomous: true
requirements:
  - CLEAN-01
  - CLEAN-02
  - CLEAN-03

must_haves:
  truths:
    - "Makefile and make/ directory no longer exist in repository"
    - ".nvmrc no longer exists in repository"
    - "backend/.python-version no longer exists in repository"
    - "No stale Make references remain in active scripts (setup.sh updated)"
    - "just recipes continue to work identically after deletion"
  artifacts:
    - path: "Makefile"
      provides: "DELETED — must not exist"
    - path: "make/"
      provides: "DELETED — must not exist"
    - path: ".nvmrc"
      provides: "DELETED — must not exist"
    - path: "backend/.python-version"
      provides: "DELETED — must not exist"
    - path: "setup.sh"
      provides: "Updated with just commands instead of Make references"
  key_links:
    - from: ".mise.toml"
      to: ".nvmrc (deleted)"
      via: "mise [tools] section replaces .nvmrc for Node version"
      pattern: "node.*22"
    - from: ".mise.toml"
      to: "backend/.python-version (deleted)"
      via: "mise [tools] section replaces .python-version for Python version"
      pattern: "python.*3\\.11"
    - from: "justfile"
      to: "Makefile (deleted)"
      via: "just recipes fully replace all Make targets"
      pattern: "import"
---

<objective>
Remove all deprecated Make build system files and legacy tool-version files, now that mise + just fully replace them. Update any stale references in active scripts.

Purpose: Complete the v1.2 Build System Modernization milestone by removing the old build system artifacts that are no longer used.
Output: Repository with no Makefile, no make/ directory, no .nvmrc, no backend/.python-version, and setup.sh updated to reference just.
</objective>

<execution_context>
@/Users/joe/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joe/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-cleanup/16-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update stale Make references in setup.sh</name>
  <files>setup.sh</files>
  <action>
Update `setup.sh` lines 86-89 which currently reference Make commands:

```
echo "Using Makefile:"
echo "  make dev          # Start both servers"
echo "  make backend      # Start backend only"
echo "  make frontend     # Start frontend only"
```

Replace with just commands:

```
echo "Using just:"
echo "  just dev::dev       # Start both servers"
echo "  just dev::backend   # Start backend only"
echo "  just dev::frontend  # Start frontend only"
```

Also update the header comment on line 4 from "Alternative to Makefile for first-time setup" to "Alternative to just setup for first-time setup".

Do NOT delete setup.sh — it is a valid alternative setup path for users who want a standalone script.

Do NOT modify any other files. The research confirmed these are the only stale references in active (non-planning, non-changelog) files. `CONTRIBUTING.md` line 18 uses "Make" as an English verb, not the tool — leave it alone.
  </action>
  <verify>
    <automated>grep -n "make\|Makefile" setup.sh | grep -iv "just" | grep -iv "mise" || echo "CLEAN: no stale Make references"</automated>
  </verify>
  <done>setup.sh references just commands instead of Make commands. Header comment updated. No other stale Make references in active scripts.</done>
</task>

<task type="auto">
  <name>Task 2: Delete deprecated Make and tool-version files</name>
  <files>Makefile, make/db.mk, make/dev.mk, make/docker.mk, make/i18n.mk, make/release.mk, make/test.mk, make/utils.mk, .nvmrc, backend/.python-version</files>
  <action>
Delete the following files using `git rm`:

1. **CLEAN-01**: Root Makefile and entire make/ directory
   - `git rm Makefile`
   - `git rm -r make/`

2. **CLEAN-02**: Legacy Node version file
   - `git rm .nvmrc`

3. **CLEAN-03**: Legacy Python version file (research corrected the CONTEXT.md claim that this was already removed — it still exists at `backend/.python-version`)
   - `git rm backend/.python-version`

Do NOT delete:
- `data/Makefile` — intentional delegation target (just recipes call `make -C data`)
- `deploy/swag-test/Makefile` — separate sub-project, not part of root build system
- Any files in `.planning/` or `CHANGELOG.md` — historical records with legitimate Make references

After deletion, validate:
1. `ls Makefile make/ .nvmrc backend/.python-version 2>&1` — all should report "No such file or directory"
2. `just --list` — should still work (justfile has no dependency on Makefile)
3. `just install` — should succeed (mise + uv + npm, no Make dependency)
  </action>
  <verify>
    <automated>test ! -f Makefile && test ! -d make/ && test ! -f .nvmrc && test ! -f backend/.python-version && echo "ALL DELETED" || echo "FAIL: some files still exist"</automated>
  </verify>
  <done>Makefile, make/ directory (7 files), .nvmrc, and backend/.python-version are all removed from the repository. just --list still works. No CI-breaking changes.</done>
</task>

</tasks>

<verification>
1. `ls Makefile make/ .nvmrc backend/.python-version 2>&1` — all report "No such file or directory"
2. `just --list` — shows all recipes (no parse errors from missing Makefile)
3. `grep -rn "make\b" setup.sh` — no stale Make tool references (only "just" references)
4. `data/Makefile` and `deploy/swag-test/Makefile` still exist (intentionally preserved)
5. CI remains green after push (validated by GitHub Actions)
</verification>

<success_criteria>
- Makefile and make/ directory permanently removed from repository
- .nvmrc permanently removed (mise manages Node version)
- backend/.python-version permanently removed (mise manages Python version)
- setup.sh updated with just commands
- data/Makefile and deploy/swag-test/Makefile intentionally preserved
- just recipes work identically to pre-cleanup state
</success_criteria>

<output>
After completion, create `.planning/phases/16-cleanup/16-01-SUMMARY.md`
</output>
