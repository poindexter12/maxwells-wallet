---
phase: 06-formal-verification-sweep
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/02-sca-repository-health/02-VERIFICATION.md
  - .planning/phases/03-container-scanning/03-VERIFICATION.md
  - .planning/phases/04-dast/04-VERIFICATION.md
  - .planning/phases/05-documentation/05-VERIFICATION.md
autonomous: true
requirements:
  - SCA-01
  - SCA-02
  - SCA-03
  - SCA-04
  - SCORE-01
  - SCORE-02
  - SCORE-03
  - SCORE-04
  - CNTR-01
  - CNTR-02
  - CNTR-03
  - CNTR-04
  - DAST-01
  - DAST-02
  - DAST-03
  - DAST-04
  - DOCS-01
  - DOCS-02

must_haves:
  truths:
    - "Phase 2 has VERIFICATION.md confirming all 8 SCA/Scorecard requirements satisfied with file:line evidence"
    - "Phase 3 has VERIFICATION.md confirming all 4 Container Scanning requirements satisfied with file:line evidence"
    - "Phase 4 has VERIFICATION.md confirming all 4 DAST requirements satisfied with file:line evidence"
    - "Phase 5 has VERIFICATION.md confirming all 2 Documentation requirements satisfied with file:line evidence"
    - "All 18 requirements have 3-source verification (VERIFICATION.md + SUMMARY + REQUIREMENTS.md)"
    - "Each VERIFICATION.md follows Phase 1 template structure with frontmatter, Observable Truths, Required Artifacts, Key Links, Requirements Coverage"
  artifacts:
    - path: ".planning/phases/02-sca-repository-health/02-VERIFICATION.md"
      provides: "Formal verification of Phase 2 SCA and Scorecard requirements"
      min_lines: 120
    - path: ".planning/phases/03-container-scanning/03-VERIFICATION.md"
      provides: "Formal verification of Phase 3 Trivy container scanning requirements"
      min_lines: 100
    - path: ".planning/phases/04-dast/04-VERIFICATION.md"
      provides: "Formal verification of Phase 4 ZAP DAST requirements"
      min_lines: 100
    - path: ".planning/phases/05-documentation/05-VERIFICATION.md"
      provides: "Formal verification of Phase 5 documentation requirements"
      min_lines: 80
  key_links:
    - from: "02-VERIFICATION.md"
      to: ".github/workflows/security.yaml"
      via: "Verifies SCA requirements against Dependency-Check job implementation"
      pattern: "dependency-check job|NVD cache|SARIF category.*dependency-check"
    - from: "02-VERIFICATION.md"
      to: ".github/workflows/scorecard.yaml"
      via: "Verifies Scorecard requirements against workflow implementation"
      pattern: "ossf/scorecard-action|publish_results.*true|id-token.*write"
    - from: "03-VERIFICATION.md"
      to: ".github/workflows/ci.yaml"
      via: "Verifies Trivy container scanning requirements against docker job"
      pattern: "trivy-action|image-ref.*maxwells-wallet|category.*trivy-container"
    - from: "04-VERIFICATION.md"
      to: ".github/workflows/dast.yaml"
      via: "Verifies ZAP DAST requirements against workflow implementation"
      pattern: "zaproxy/action-baseline|docker compose.*up|category.*zap"
    - from: "05-VERIFICATION.md"
      to: "README.md"
      via: "Verifies documentation requirements against Security Tools section"
      pattern: "Security Tools|Semgrep|Dependency-Check|Scorecard|Trivy|ZAP"
---

<objective>
Create formal VERIFICATION.md artifacts for Phases 2-5, establishing 3-source verification (VERIFICATION.md + SUMMARY + REQUIREMENTS.md) for all 18 remaining v1 requirements.

Purpose: Close procedural gaps identified in v1 milestone audit. Phase 1 has VERIFICATION.md; Phases 2-5 only have SUMMARYs. Formal verification provides auditable evidence that each requirement is satisfied with specific file:line references.

Output: Four VERIFICATION.md documents following Phase 1 template structure (frontmatter, Observable Truths table, Required Artifacts table, Key Link Verification, Requirements Coverage, Anti-Patterns check).
</objective>

<execution_context>
@/Users/joe/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joe/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 1 template (format reference)
@.planning/phases/01-foundation-sast/01-VERIFICATION.md

# Phase 2-5 summaries (what was built)
@.planning/phases/02-sca-repository-health/02-01-SUMMARY.md
@.planning/phases/02-sca-repository-health/02-02-SUMMARY.md
@.planning/phases/03-container-scanning/03-01-SUMMARY.md
@.planning/phases/04-dast/04-01-SUMMARY.md
@.planning/phases/05-documentation/05-01-SUMMARY.md

# Workflow files to verify against
@.github/workflows/security.yaml
@.github/workflows/scorecard.yaml
@.github/workflows/ci.yaml
@.github/workflows/dast.yaml
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Phase 2 VERIFICATION.md for SCA and Scorecard</name>
  <files>.planning/phases/02-sca-repository-health/02-VERIFICATION.md</files>
  <action>
Create 02-VERIFICATION.md following Phase 1 template structure:

**Frontmatter:**
- phase: 02-sca-repository-health
- verified: 2026-02-23T[current-time]Z
- status: passed
- score: 12/12 must-haves verified (8 truths for SCA+Scorecard, 3 artifacts, 1 key link per tool)
- re_verification: false

**Phase Goal:** "Developers see dependency vulnerabilities from OWASP Dependency-Check and repository security posture score from OpenSSF Scorecard in GitHub Security tab"

**Observable Truths (8 truths):**
1. Dependency-Check job exists in security.yaml and scans npm + Python dependencies
2. NVD database caching implemented with 24h TTL (datetime-based cache key)
3. requirements.txt generated from pyproject.toml using uv for Python compatibility
4. Dependency-Check SARIF uploads with category 'dependency-check'
5. Scorecard runs in isolated workflow (scorecard.yaml) on push to main + weekly schedule
6. Scorecard uses publish_results: true for OpenSSF API compliance
7. Scorecard requires id-token: write permission for OIDC authentication
8. Both tools use continue-on-error: true (non-blocking execution)

**Required Artifacts (3):**
- .github/workflows/security.yaml (Dependency-Check job added)
- .github/workflows/scorecard.yaml (isolated workflow created)
- backend/requirements.txt (generated during CI run, not committed)

**Key Links (2):**
- security.yaml dependency-check job → NVD cache via actions/cache
- scorecard.yaml → OpenSSF API via publish_results: true + id-token: write

**Requirements Coverage (8):**
For each requirement (SCA-01 through SCA-04, SCORE-01 through SCORE-04):
- Description from phase requirements
- Status: ✓ SATISFIED
- Evidence: specific file:line references from workflow files

**Evidence sources:**
- .github/workflows/security.yaml lines 57-116 (Dependency-Check job)
- .github/workflows/scorecard.yaml lines 1-47 (full workflow)
- Phase 2 plan commits: 8e6db69 (Dependency-Check), a96044c (Scorecard)

Use grep patterns to find exact line numbers for: NVD cache key, enableExperimental flag, SARIF categories, publish_results, id-token permission.
  </action>
  <verify>
grep -c "SCA-0[1-4]" .planning/phases/02-sca-repository-health/02-VERIFICATION.md returns 4
grep -c "SCORE-0[1-4]" .planning/phases/02-sca-repository-health/02-VERIFICATION.md returns 4
grep "status: passed" .planning/phases/02-sca-repository-health/02-VERIFICATION.md
wc -l .planning/phases/02-sca-repository-health/02-VERIFICATION.md shows >120 lines
  </verify>
  <done>
Phase 2 VERIFICATION.md exists with 8 requirements satisfied, file:line evidence for all truths, frontmatter complete, status: passed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Phase 3 VERIFICATION.md for Container Scanning</name>
  <files>.planning/phases/03-container-scanning/03-VERIFICATION.md</files>
  <action>
Create 03-VERIFICATION.md following Phase 1 template structure:

**Frontmatter:**
- phase: 03-container-scanning
- verified: 2026-02-23T[current-time]Z
- status: passed
- score: 8/8 must-haves verified (4 truths, 1 artifact, 3 key links)
- re_verification: false

**Phase Goal:** "Production Docker images are scanned for OS package and application dependency vulnerabilities before push to GHCR"

**Observable Truths (4):**
1. Trivy scans locally built maxwells-wallet:latest image after docker-compose build
2. Trivy scan-type: 'image' detects OS packages (apt from python:3.12-slim) and app dependencies (npm, pip)
3. Trivy SARIF uploads with category 'trivy-container'
4. Trivy uses continue-on-error: true (non-blocking), GHCR push proceeds regardless

**Required Artifacts (1):**
- .github/workflows/ci.yaml (docker job modified, Trivy steps added at lines 260-274)

**Key Links (3):**
- ci.yaml docker-compose build → Trivy scan (image-ref: maxwells-wallet:latest)
- Trivy scan → SARIF upload with category trivy-container
- Trivy positioned before buildx setup to scan all builds (PRs + main)

**Requirements Coverage (4):**
For each requirement (CNTR-01 through CNTR-04):
- Description from phase requirements
- Status: ✓ SATISFIED
- Evidence: specific file:line references from ci.yaml

**Evidence sources:**
- .github/workflows/ci.yaml lines 260-274 (Trivy integration)
- Phase 3 plan commit: 329daf6

Use grep patterns to find exact line numbers for: aquasecurity/trivy-action SHA pin, scan-type, image-ref, severity levels, SARIF category.
  </action>
  <verify>
grep -c "CNTR-0[1-4]" .planning/phases/03-container-scanning/03-VERIFICATION.md returns 4
grep "status: passed" .planning/phases/03-container-scanning/03-VERIFICATION.md
wc -l .planning/phases/03-container-scanning/03-VERIFICATION.md shows >100 lines
  </verify>
  <done>
Phase 3 VERIFICATION.md exists with 4 requirements satisfied, file:line evidence for Trivy integration, frontmatter complete, status: passed.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Phase 4 VERIFICATION.md for DAST</name>
  <files>.planning/phases/04-dast/04-VERIFICATION.md</files>
  <action>
Create 04-VERIFICATION.md following Phase 1 template structure:

**Frontmatter:**
- phase: 04-dast
- verified: 2026-02-23T[current-time]Z
- status: passed
- score: 9/9 must-haves verified (4 truths, 2 artifacts, 3 key links)
- re_verification: false

**Phase Goal:** "Running application is scanned for runtime vulnerabilities via OWASP ZAP baseline scan in ephemeral CI environment"

**Observable Truths (4):**
1. Docker Compose spins up ephemeral Maxwell's Wallet instance (frontend:3000, backend:3001) with health checks
2. ZAP baseline (passive) scan runs against http://localhost:3000 using zaproxy/action-baseline@v0.15.0
3. ZAP produces HTML and Markdown reports uploaded as CI artifacts with 30-day retention
4. ZAP scan uses continue-on-error: true (non-blocking execution)

**Required Artifacts (2):**
- .github/workflows/dast.yaml (isolated DAST workflow)
- docker-compose.dev.yaml (app orchestration, already exists from prior work)

**Key Links (3):**
- dast.yaml → docker-compose up -d --build (ephemeral environment)
- docker-compose → health checks (15s initial + 10 retries @ 3s intervals)
- ZAP scan → SARIF upload with category 'zap'

**Requirements Coverage (4):**
For each requirement (DAST-01 through DAST-04):
- Description from phase requirements
- Status: ✓ SATISFIED
- Evidence: specific file:line references from dast.yaml

**Evidence sources:**
- .github/workflows/dast.yaml lines 1-91 (full workflow)
- Phase 4 plan commit: af17d18

Use grep patterns to find exact line numbers for: zaproxy/action-baseline SHA pin, docker compose command, health check loops, SARIF category, artifact retention.
  </action>
  <verify>
grep -c "DAST-0[1-4]" .planning/phases/04-dast/04-VERIFICATION.md returns 4
grep "status: passed" .planning/phases/04-dast/04-VERIFICATION.md
wc -l .planning/phases/04-dast/04-VERIFICATION.md shows >100 lines
  </verify>
  <done>
Phase 4 VERIFICATION.md exists with 4 requirements satisfied, file:line evidence for ZAP DAST workflow, frontmatter complete, status: passed.
  </done>
</task>

<task type="auto">
  <name>Task 4: Create Phase 5 VERIFICATION.md for Documentation</name>
  <files>.planning/phases/05-documentation/05-VERIFICATION.md</files>
  <action>
Create 05-VERIFICATION.md following Phase 1 template structure:

**Frontmatter:**
- phase: 05-documentation
- verified: 2026-02-23T[current-time]Z
- status: passed
- score: 7/7 must-haves verified (2 truths, 1 artifact, 4 key links)
- re_verification: false

**Phase Goal:** "Developers and stakeholders understand what security tooling runs, where to find findings, and how to interpret results"

**Observable Truths (2):**
1. README documents all five security tools (Semgrep, Dependency-Check, Scorecard, Trivy, ZAP) with brief descriptions and frequencies
2. README explains how to access GitHub Security tab and filter findings by category

**Required Artifacts (1):**
- README.md (Security Tools section added)

**Key Links (4):**
- README → .github/workflows/security.yaml (Semgrep, Dependency-Check documented)
- README → .github/workflows/scorecard.yaml (Scorecard weekly schedule documented)
- README → .github/workflows/ci.yaml (Trivy image scanning documented)
- README → .github/workflows/dast.yaml (ZAP baseline scan documented)

**Requirements Coverage (2):**
For each requirement (DOCS-01, DOCS-02):
- Description from phase requirements
- Status: ✓ SATISFIED
- Evidence: specific line references from README.md Security Tools section

**Evidence sources:**
- README.md Security Tools section (use grep to find exact line range)
- Phase 5 plan commit: 1724712

Use grep patterns to find exact line numbers for: Security Tools heading, each tool name (Semgrep, Dependency-Check, Scorecard, Trivy, ZAP), GitHub Security tab instructions, SARIF category mentions.

**Cross-reference verification:**
Confirm documentation accuracy by comparing README claims to workflow files:
- Semgrep category 'semgrep' → security.yaml line 55
- Dependency-Check category 'dependency-check' → security.yaml line 107
- Scorecard category 'scorecard' → scorecard.yaml line 39
- Trivy category 'trivy-container' → ci.yaml line 274
- ZAP category 'zap' → dast.yaml line 75
  </action>
  <verify>
grep -c "DOCS-0[1-2]" .planning/phases/05-documentation/05-VERIFICATION.md returns 2
grep "status: passed" .planning/phases/05-documentation/05-VERIFICATION.md
wc -l .planning/phases/05-documentation/05-VERIFICATION.md shows >80 lines
  </verify>
  <done>
Phase 5 VERIFICATION.md exists with 2 requirements satisfied, file:line evidence for documentation completeness, frontmatter complete, status: passed.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. All four VERIFICATION.md files exist in their respective phase directories
2. Each file has frontmatter with status: passed and accurate score
3. Each file covers all assigned requirements with file:line evidence
4. Total requirements verified: 8 (Phase 2) + 4 (Phase 3) + 4 (Phase 4) + 2 (Phase 5) = 18 requirements
5. All verification follows Phase 1 template structure for consistency
6. No anti-patterns found (no TODOs, placeholders, or empty sections)
</verification>

<success_criteria>
Phase 6 is complete when:
- 02-VERIFICATION.md exists and verifies 8 requirements (SCA-01 through SCA-04, SCORE-01 through SCORE-04)
- 03-VERIFICATION.md exists and verifies 4 requirements (CNTR-01 through CNTR-04)
- 04-VERIFICATION.md exists and verifies 4 requirements (DAST-01 through DAST-04)
- 05-VERIFICATION.md exists and verifies 2 requirements (DOCS-01, DOCS-02)
- All 18 v1 milestone requirements have 3-source verification (VERIFICATION.md + SUMMARY + REQUIREMENTS.md)
- All VERIFICATION.md documents follow consistent structure and formatting
- All files committed to git with message: "docs(06-01): create formal verification for Phases 2-5"
</success_criteria>

<output>
After completion, create `.planning/phases/06-formal-verification-sweep/06-01-SUMMARY.md` documenting:
- All four VERIFICATION.md files created
- 18 requirements formally verified with file:line evidence
- v1 milestone procedural gap closed (all phases now have verification artifacts)
- 3-source verification complete: VERIFICATION.md + SUMMARY + REQUIREMENTS.md
</output>
